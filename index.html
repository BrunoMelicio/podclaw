<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Podclaw â€” Podcast Intelligence Platform</title>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0' y1='0' x2='0' y2='1'%3E%3Cstop offset='0' stop-color='%23192231'/%3E%3Cstop offset='1' stop-color='%230f1722'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='20' fill='url(%23bg)'/%3E%3Cg transform='translate(50,48)'%3E%3Cellipse cx='0' cy='2' rx='18' ry='20' fill='%23e8622a'/%3E%3Cellipse cx='0' cy='2' rx='18' ry='20' fill='%23ff6b2b'/%3E%3Cpath d='M-18 0c-5-1-9 4-9 10s4 11 9 10' stroke='%23ff6b2b' stroke-width='5' fill='none' stroke-linecap='round'/%3E%3Cpath d='M18 0c5-1 9 4 9 10s-4 11-9 10' stroke='%23ff6b2b' stroke-width='5' fill='none' stroke-linecap='round'/%3E%3Cpath d='M-14-16a8 8 0 0 1 8-8' stroke='%23ff8450' stroke-width='4' fill='none' stroke-linecap='round'/%3E%3Cpath d='M14-16a8 8 0 0 0-8-8' stroke='%23ff8450' stroke-width='4' fill='none' stroke-linecap='round'/%3E%3Crect x='-14' y='-6' width='7' height='5' rx='2' fill='%23192231'/%3E%3Crect x='7' y='-6' width='7' height='5' rx='2' fill='%23192231'/%3E%3Ccircle cx='-10' cy='-4' r='2' fill='%23fff'/%3E%3Ccircle cx='11' cy='-4' r='2' fill='%23fff'/%3E%3Cpath d='M-6 10q6 5 12 0' stroke='%23192231' stroke-width='2.5' fill='none' stroke-linecap='round'/%3E%3Cpath d='M-10 24l-6 14' stroke='%23ff6b2b' stroke-width='4' stroke-linecap='round'/%3E%3Cpath d='M-4 26l-3 14' stroke='%23ff6b2b' stroke-width='4' stroke-linecap='round'/%3E%3Cpath d='M10 24l6 14' stroke='%23ff6b2b' stroke-width='4' stroke-linecap='round'/%3E%3Cpath d='M4 26l3 14' stroke='%23ff6b2b' stroke-width='4' stroke-linecap='round'/%3E%3Cpath d='M-20-2l-8-12' stroke='%23ff6b2b' stroke-width='3' stroke-linecap='round'/%3E%3Ccircle cx='-30' cy='-16' r='3' fill='%23ff8450'/%3E%3Cpath d='M20-2l8-12' stroke='%23ff6b2b' stroke-width='3' stroke-linecap='round'/%3E%3Ccircle cx='30' cy='-16' r='3' fill='%23ff8450'/%3E%3C/g%3E%3C/svg%3E">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,500;0,600;0,700;0,800;1,500;1,600&family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
/* ========== THEME ========== */
[data-theme="dark"] {
  --bg-0:#07070a;--bg-1:#0e0e14;--bg-2:#16161f;--bg-3:#1e1e2a;--bg-4:#282838;
  --text-0:#f4f4f7;--text-1:#c8c8d4;--text-2:#8e8ea0;--text-3:#5c5c70;
  --accent:#ff6b2b;--accent-hover:#ff8450;--accent-glow:rgba(255,107,43,0.12);--accent-glow-strong:rgba(255,107,43,0.25);
  --blue:#5ba4ff;--green:#3de8a0;--purple:#b08dff;--rose:#ff6b8a;--yellow:#ffc93c;
  --border:rgba(255,255,255,0.06);--border-hover:rgba(255,255,255,0.14);
  --card-shadow:0 2px 20px rgba(0,0,0,0.25);--overlay:rgba(7,7,10,0.85);
  --tooltip-bg:#1e1e2a;--tooltip-border:rgba(255,255,255,0.1);
  --error:#ff4d6a;
}
[data-theme="light"] {
  --bg-0:#f8f7f4;--bg-1:#ffffff;--bg-2:#f0efe9;--bg-3:#e8e6de;--bg-4:#dddbd2;
  --text-0:#1a1a1f;--text-1:#3d3d48;--text-2:#6b6b7a;--text-3:#9a9aaa;
  --accent:#e85a1e;--accent-hover:#d04a10;--accent-glow:rgba(232,90,30,0.1);--accent-glow-strong:rgba(232,90,30,0.2);
  --blue:#2b7de9;--green:#1ba86a;--purple:#7c5cbf;--rose:#e04466;--yellow:#d4a20a;
  --border:rgba(0,0,0,0.07);--border-hover:rgba(0,0,0,0.14);
  --card-shadow:0 2px 20px rgba(0,0,0,0.06);--overlay:rgba(248,247,244,0.9);
  --tooltip-bg:#ffffff;--tooltip-border:rgba(0,0,0,0.1);
  --error:#cc2244;
}

/* ========== RESET ========== */
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',sans-serif;background:var(--bg-0);color:var(--text-0);line-height:1.7;-webkit-font-smoothing:antialiased;overflow-x:hidden;transition:background .4s,color .4s}
::selection{background:var(--accent);color:#fff}
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--bg-3);border-radius:3px}

/* ========== AMBIENT ========== */
.ambient{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden}
.ambient::before{content:'';position:absolute;top:-30%;left:-20%;width:70vw;height:70vw;background:radial-gradient(circle,var(--accent-glow) 0%,transparent 70%);animation:drift 25s ease-in-out infinite}
.ambient::after{content:'';position:absolute;bottom:-20%;right:-10%;width:50vw;height:50vw;background:radial-gradient(circle,rgba(91,164,255,0.04) 0%,transparent 70%);animation:drift 30s ease-in-out infinite reverse}
@keyframes drift{0%,100%{transform:translate(0,0)}50%{transform:translate(4%,6%)}}

/* ========== LAYOUT ========== */
.app{position:relative;z-index:1}
.container{max-width:960px;margin:0 auto;padding:0 20px}

/* ========== NAV ========== */
.nav{position:sticky;top:0;z-index:100;background:var(--overlay);backdrop-filter:blur(24px) saturate(1.3);border-bottom:1px solid var(--border);padding:14px 0}
.nav .container{display:flex;align-items:center;justify-content:space-between}
.logo{font-family:'Playfair Display',serif;font-size:24px;font-weight:700;color:var(--text-0);text-decoration:none;letter-spacing:-.5px;cursor:pointer}
.logo span{color:var(--accent)}
.nav-right{display:flex;gap:10px;align-items:center}
.theme-toggle{width:40px;height:40px;border-radius:12px;background:var(--bg-2);border:1px solid var(--border);color:var(--text-2);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;transition:all .25s}
.theme-toggle:hover{border-color:var(--border-hover);color:var(--text-0)}
.btn{display:inline-flex;align-items:center;gap:7px;padding:10px 18px;border:1px solid var(--border);border-radius:12px;background:var(--bg-2);color:var(--text-2);font-size:13px;font-weight:500;cursor:pointer;transition:all .25s;font-family:inherit;text-decoration:none}
.btn:hover{border-color:var(--border-hover);color:var(--text-0)}

/* ========== HERO ========== */
.hero-section{padding:80px 0 60px;text-align:center}
.hero-section.collapsed{display:none}
.hero-badge{display:inline-block;padding:6px 18px;margin-bottom:28px;background:var(--accent-glow);border:1px solid rgba(255,107,43,0.15);border-radius:100px;font-size:11px;font-weight:700;color:var(--accent);text-transform:uppercase;letter-spacing:2px}
.hero-section h1{font-family:'Playfair Display',serif;font-size:clamp(42px,7vw,80px);line-height:1.02;letter-spacing:-2.5px;margin-bottom:24px}
.hero-section h1 em{font-style:italic;color:var(--accent)}
.hero-section>div>p{font-size:17px;color:var(--text-2);max-width:480px;margin:0 auto 44px;line-height:1.75}
.input-zone{max-width:640px;margin:0 auto}
.input-wrap{display:flex;align-items:center;gap:8px;background:var(--bg-1);border:1.5px solid var(--border);border-radius:16px;padding:8px;transition:all .25s}
.input-wrap:focus-within{border-color:var(--accent);box-shadow:0 0 0 4px var(--accent-glow)}
.input-wrap input{flex:1;background:none;border:none;outline:none;padding:12px 14px;color:var(--text-0);font-size:15px;font-family:inherit}
.input-wrap input::placeholder{color:var(--text-3)}
.input-go{padding:12px 24px;background:var(--accent);border:none;border-radius:12px;color:#fff;font-weight:600;font-size:14px;cursor:pointer;transition:all .25s;font-family:inherit;white-space:nowrap}
.input-go:hover{background:var(--accent-hover)}
.input-go:disabled{opacity:.5;cursor:not-allowed}

/* ========== DEMO CARDS ========== */
.demos-section{max-width:760px;margin:48px auto 0;text-align:center}
.demos-label{font-size:13px;font-weight:600;color:var(--text-3);text-transform:uppercase;letter-spacing:2px;margin-bottom:20px}
.demos-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
@media(max-width:640px){.demos-grid{grid-template-columns:1fr}}
.demo-card{background:var(--bg-1);border:1px solid var(--border);border-radius:16px;padding:20px;cursor:pointer;transition:all .3s;text-align:left;position:relative;overflow:hidden}
.demo-card:hover{border-color:var(--accent);transform:translateY(-3px);box-shadow:var(--card-shadow)}
.demo-card::after{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--accent);opacity:0;transition:opacity .25s}
.demo-card:hover::after{opacity:1}
.demo-ep{font-size:10px;font-weight:700;color:var(--accent);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:10px}
.demo-title{font-family:'Playfair Display',serif;font-size:16px;line-height:1.25;margin-bottom:8px;letter-spacing:-.3px}
.demo-guest{font-size:13px;color:var(--text-2);margin-bottom:10px;font-style:italic}
.demo-meta{display:flex;gap:8px;flex-wrap:wrap}
.demo-tag{padding:3px 9px;background:var(--bg-2);border-radius:100px;font-size:10px;color:var(--text-3);font-weight:500}
.demo-thumb{height:100px;border-radius:12px 12px 0 0;margin:-20px -20px 16px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
.demo-thumb .demo-show-art{font-size:28px;font-weight:700;color:rgba(255,255,255,0.9);font-family:'Playfair Display',serif;letter-spacing:-1px;text-shadow:0 2px 8px rgba(0,0,0,0.3)}

/* ========== LOADING ========== */
.loading{display:none;position:fixed;inset:0;background:var(--overlay);backdrop-filter:blur(10px);z-index:200;flex-direction:column;align-items:center;justify-content:center;gap:28px}
.loading.active{display:flex}
.spinner{width:44px;height:44px;border:3px solid var(--bg-3);border-top-color:var(--accent);border-radius:50%;animation:spin .7s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.loading h2{font-family:'Playfair Display',serif;font-size:22px}
.loading .load-sub{font-size:13px;color:var(--text-3);margin-top:-16px}
.load-steps{display:flex;flex-direction:column;gap:10px}
.load-step{display:flex;align-items:center;gap:10px;font-size:13px;color:var(--text-3);opacity:0;transform:translateY(6px);transition:all .35s}
.load-step.vis{opacity:1;transform:translateY(0)}
.load-step.done{color:var(--green)}
.load-step.error{color:var(--error)}
.load-step .dot{width:16px;height:16px;border-radius:50%;border:1.5px solid currentColor;display:flex;align-items:center;justify-content:center;font-size:9px}
.load-step.done .dot{background:var(--green);border-color:var(--green);color:var(--bg-0)}
.load-step.error .dot{background:var(--error);border-color:var(--error);color:#fff}
.load-error{max-width:400px;text-align:center;padding:20px;background:var(--bg-2);border:1px solid var(--error);border-radius:14px;display:none}
.load-error.active{display:block}
.load-error p{font-size:14px;color:var(--error);margin-bottom:12px}
.load-error button{padding:10px 20px;background:var(--bg-3);border:1px solid var(--border);border-radius:10px;color:var(--text-1);cursor:pointer;font-family:inherit;font-size:13px}
.load-error button:hover{background:var(--bg-4)}

/* ========== PODCAST VIEW ========== */
.podcast-view{display:none}
.podcast-view.active{display:block}
.ep-header{padding:48px 0 20px}
.ep-show{display:flex;align-items:center;gap:10px;margin-bottom:20px}
.ep-show-icon{width:36px;height:36px;border-radius:10px;background:var(--bg-3);display:flex;align-items:center;justify-content:center;font-size:16px}
.ep-show-name{font-size:13px;font-weight:600;color:var(--text-2);text-transform:uppercase;letter-spacing:1.5px}
.ep-tags{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap}
.ep-tag{padding:4px 12px;background:var(--bg-2);border-radius:100px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--text-3)}
.ep-header h1{font-family:'Playfair Display',serif;font-size:clamp(30px,5vw,52px);line-height:1.08;letter-spacing:-1.5px;margin-bottom:16px;max-width:700px}
.guest-line{display:flex;align-items:center;gap:10px;margin-bottom:24px}
.guest-name{font-size:20px;font-weight:500;color:var(--accent);font-family:'Playfair Display',serif;font-style:italic}
.guest-info-trigger{position:relative;display:inline-flex}
.guest-info-btn{width:24px;height:24px;border-radius:50%;background:var(--bg-3);border:1px solid var(--border);color:var(--text-3);font-size:12px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .25s;font-family:'Playfair Display',serif;font-style:italic}
.guest-info-btn:hover{background:var(--accent);border-color:var(--accent);color:#fff}
.guest-tooltip{position:absolute;top:calc(100% + 10px);left:50%;transform:translateX(-50%);width:320px;padding:20px;background:var(--tooltip-bg);border:1px solid var(--tooltip-border);border-radius:14px;box-shadow:0 12px 40px rgba(0,0,0,0.2);opacity:0;pointer-events:none;transition:all .25s;z-index:60}
.guest-tooltip::before{content:'';position:absolute;top:-6px;left:50%;transform:translateX(-50%) rotate(45deg);width:12px;height:12px;background:var(--tooltip-bg);border-left:1px solid var(--tooltip-border);border-top:1px solid var(--tooltip-border)}
.guest-info-trigger:hover .guest-tooltip,.guest-info-trigger.active .guest-tooltip{opacity:1;pointer-events:auto}
.guest-tooltip h4{font-family:'Playfair Display',serif;font-size:16px;margin-bottom:8px;color:var(--text-0)}
.guest-tooltip p{font-size:13px;color:var(--text-2);line-height:1.65}
.guest-tooltip .gt-links{display:flex;gap:8px;margin-top:12px}
.guest-tooltip .gt-link{padding:4px 12px;background:var(--bg-3);border-radius:100px;font-size:11px;color:var(--text-2);text-decoration:none;transition:all .2s}
.guest-tooltip .gt-link:hover{color:var(--accent)}
.ep-stats{display:flex;gap:20px;flex-wrap:wrap}
.stat{font-size:13px;color:var(--text-3);display:flex;align-items:center;gap:5px}

/* ========== AUDIO PLAYER ========== */
.player-wrap{margin:24px 0 10px;border-radius:16px;overflow:hidden;background:var(--bg-1);position:relative;border:1px solid var(--border);padding:0}
.audio-player-box{display:flex;gap:14px;align-items:center;padding:14px}
.pod-art{width:48px;height:48px;border-radius:8px;object-fit:cover}
.audio-show{font-size:11px;color:var(--text-3);text-transform:uppercase;letter-spacing:1px}
.audio-ep-title{font-size:14px;font-weight:500;color:var(--text-1)}

/* ========== TABS ========== */
.tabs{position:sticky;top:63px;z-index:50;background:var(--overlay);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none}
.tabs::-webkit-scrollbar{display:none}
.tabs .container{display:flex;gap:0}
.tab{padding:15px 22px;font-size:13px;font-weight:500;color:var(--text-3);background:none;border:none;border-bottom:2px solid transparent;cursor:pointer;transition:all .25s;font-family:inherit;white-space:nowrap}
.tab:hover{color:var(--text-1)}
.tab.active{color:var(--accent);border-bottom-color:var(--accent)}
.tab .n{margin-left:5px;font-size:10px;padding:2px 6px;background:var(--bg-3);border-radius:100px;color:var(--text-3)}
.tab.active .n{background:var(--accent-glow);color:var(--accent)}

/* ========== PANELS ========== */
.panels{padding:44px 0 100px}
.panel{display:none;animation:up .3s ease}
.panel.active{display:block}
@keyframes up{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.stitle{font-family:'Playfair Display',serif;font-size:clamp(24px,3.5vw,32px);letter-spacing:-.5px;margin-bottom:24px}

/* ========== OVERVIEW ========== */
.overview{display:grid;grid-template-columns:1fr 300px;gap:40px}
@media(max-width:860px){.overview{grid-template-columns:1fr}}
.rich-text{font-size:16px;color:var(--text-1);line-height:1.85}
.rich-text p{margin-bottom:18px}
.rich-text .hl{color:var(--accent);font-weight:600}
.rich-text .hl-blue{color:var(--blue);font-weight:600}
.rich-text .hl-green{color:var(--green);font-weight:600}
.rich-text .hl-purple{color:var(--purple);font-weight:600}
.rich-text em{font-style:italic;color:var(--text-0)}
.takeaways{display:flex;flex-direction:column;gap:12px;margin-top:32px}
.tk{display:flex;gap:16px;padding:20px;background:var(--bg-1);border:1px solid var(--border);border-radius:14px;transition:all .25s}
.tk:hover{border-color:var(--border-hover)}
.tk-icon{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.tk h4{font-size:15px;font-weight:600;margin-bottom:4px}
.tk p{font-size:13px;color:var(--text-2);line-height:1.65}
.sidebar{display:flex;flex-direction:column;gap:24px}
.side-card{background:var(--bg-1);border:1px solid var(--border);border-radius:14px;padding:24px}
.side-card h3{font-family:'Playfair Display',serif;font-size:18px;margin-bottom:14px}
.topics{display:flex;flex-wrap:wrap;gap:7px}
.topic{padding:5px 14px;background:var(--bg-2);border:1px solid var(--border);border-radius:100px;font-size:12px;color:var(--text-2);cursor:pointer;transition:all .2s}
.topic:hover{border-color:var(--accent);color:var(--accent)}
.chapters{display:flex;flex-direction:column}
.ch{display:flex;gap:12px;padding:10px 0;border-bottom:1px solid var(--border);cursor:pointer;transition:all .2s;text-decoration:none;color:inherit}
.ch:last-child{border-bottom:none}
.ch:hover{padding-left:6px}
.ch:hover .ch-name{color:var(--accent)}
.ch-time{font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text-3);min-width:52px;padding-top:1px}
.ch-name{font-size:13px;font-weight:500;color:var(--text-2);transition:color .2s}

/* ========== INSIGHTS ========== */
.insights{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:18px}
@media(max-width:500px){.insights{grid-template-columns:1fr}}
.ins{background:var(--bg-1);border:1px solid var(--border);border-radius:14px;padding:28px;transition:all .25s;position:relative;overflow:hidden}
.ins::after{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--c,var(--accent));opacity:0;transition:opacity .25s}
.ins:hover{border-color:var(--border-hover);transform:translateY(-2px);box-shadow:var(--card-shadow)}
.ins:hover::after{opacity:1}
.ins-label{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1.8px;margin-bottom:12px;display:flex;align-items:center;gap:7px}
.ins h3{font-family:'Playfair Display',serif;font-size:20px;line-height:1.25;letter-spacing:-.3px;margin-bottom:10px}
.ins p{font-size:14px;color:var(--text-2);line-height:1.7}
.ins .ts{margin-top:14px;font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text-3)}
.ts-link{color:var(--accent);text-decoration:none;cursor:pointer;background:none;border:none;font-family:'JetBrains Mono',monospace;font-size:11px;padding:0}
.ts-link:hover{text-decoration:underline}

/* ========== QUOTES ========== */
.quotes{columns:2;column-gap:18px}
@media(max-width:640px){.quotes{columns:1}}
.q{break-inside:avoid;margin-bottom:18px;background:var(--bg-1);border:1px solid var(--border);border-radius:14px;padding:28px;transition:all .25s;position:relative}
.q:hover{border-color:var(--border-hover)}
.q-mark{font-family:'Playfair Display',serif;font-size:56px;line-height:1;color:var(--accent);opacity:.25;position:absolute;top:14px;left:22px}
.q-text{font-family:'Playfair Display',serif;font-size:18px;line-height:1.5;color:var(--text-0);padding-top:18px;position:relative;z-index:1;margin-bottom:16px}
.q-foot{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px}
.q-who{font-size:12px;color:var(--accent);font-weight:600}
.q-acts{display:flex;gap:6px}
.q-act{width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:8px;border:1px solid var(--border);background:var(--bg-2);color:var(--text-3);cursor:pointer;transition:all .2s;font-size:13px}
.q-act:hover{color:var(--accent);border-color:var(--accent)}

/* ========== CLIPS ========== */
.clips-intro{font-size:15px;color:var(--text-2);margin-bottom:24px;line-height:1.7}
.clips{display:flex;flex-direction:column;gap:14px}
.clip{display:flex;gap:18px;align-items:flex-start;background:var(--bg-1);border:1px solid var(--border);border-radius:14px;padding:24px;transition:all .25s}
.clip:hover{border-color:var(--border-hover)}
.clip-num{font-family:'Playfair Display',serif;font-size:28px;color:var(--accent);opacity:.4;min-width:36px;line-height:1;padding-top:2px}
.clip-body{flex:1}
.clip-body h3{font-size:16px;font-weight:600;margin-bottom:8px}
.clip-body p{font-size:14px;color:var(--text-2);line-height:1.7;margin-bottom:12px}
.clip-meta{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.clip-time{font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--accent);background:var(--accent-glow);padding:4px 10px;border-radius:6px;text-decoration:none;transition:all .2s;cursor:pointer;border:none;font-family:'JetBrains Mono',monospace}
.clip-time:hover{background:var(--accent-glow-strong)}
.clip-tag{font-size:11px;color:var(--text-3);background:var(--bg-2);padding:4px 10px;border-radius:6px}
.clip-share{margin-left:auto}
@media(max-width:500px){.clip{flex-direction:column;gap:10px}.clip-num{font-size:22px}}

/* ========== TIMELINE ========== */
.tl{position:relative;padding-left:36px}
.tl::before{content:'';position:absolute;left:11px;top:0;bottom:0;width:2px;background:var(--border)}
.tl-e{position:relative;padding-bottom:28px}
.tl-dot{position:absolute;left:-30px;top:5px;width:10px;height:10px;border-radius:50%;background:var(--bg-3);border:2px solid var(--text-3);z-index:1;transition:all .2s}
.tl-e:hover .tl-dot{background:var(--accent);border-color:var(--accent)}
.tl-e-time{font-family:'JetBrains Mono',monospace;font-size:11px;margin-bottom:4px}
.tl-e-time .ts-link{color:var(--accent)}
.tl-e h3{font-size:16px;font-weight:600;margin-bottom:6px}
.tl-e p{font-size:14px;color:var(--text-2);line-height:1.7}
.tl-tags{display:flex;gap:5px;margin-top:8px;flex-wrap:wrap}
.tl-tag{padding:3px 9px;background:var(--bg-2);border-radius:100px;font-size:10px;color:var(--text-3)}

/* ========== ASK AI ========== */
.chat{max-width:680px;margin:0 auto}
.msgs{display:flex;flex-direction:column;gap:18px;margin-bottom:20px;min-height:260px}
.msg{display:flex;gap:12px;animation:up .3s ease}
.msg-av{width:34px;height:34px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700;flex-shrink:0}
.msg-av.ai{background:var(--accent-glow);color:var(--accent);border:1px solid rgba(255,107,43,0.15)}
.msg-av.user{background:var(--bg-2);color:var(--text-2);border:1px solid var(--border)}
.msg-bubble{background:var(--bg-1);border:1px solid var(--border);border-radius:14px;padding:16px 20px;font-size:14px;line-height:1.7;color:var(--text-1);max-width:85%}
.msg-bubble strong{color:var(--text-0)}
.msg-bubble .ref{display:inline-flex;align-items:center;gap:3px;font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--accent);background:var(--accent-glow);padding:2px 7px;border-radius:4px;margin:0 2px}
.suggestions{display:flex;flex-wrap:wrap;gap:7px;margin-bottom:18px}
.sug{padding:8px 16px;background:var(--bg-1);border:1px solid var(--border);border-radius:100px;font-size:12px;color:var(--text-2);cursor:pointer;transition:all .2s;font-family:inherit}
.sug:hover{border-color:var(--accent);color:var(--accent)}
.chat-bar{display:flex;gap:8px}
.chat-in{flex:1;background:var(--bg-1);border:1.5px solid var(--border);border-radius:12px;padding:13px 16px;color:var(--text-0);font-size:14px;font-family:inherit;outline:none;transition:all .25s}
.chat-in:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-glow)}
.chat-go{padding:13px 22px;background:var(--accent);border:none;border-radius:12px;color:#fff;font-weight:600;cursor:pointer;transition:all .25s;font-family:inherit}
.chat-go:hover{background:var(--accent-hover)}

/* ========== MODAL ========== */
.modal-bg{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.5);backdrop-filter:blur(6px);z-index:300;align-items:center;justify-content:center}
.modal-bg.active{display:flex}
.modal{background:var(--bg-1);border:1px solid var(--border);border-radius:16px;padding:28px;max-width:440px;width:90%;animation:up .2s ease}
.modal h2{font-family:'Playfair Display',serif;font-size:22px;margin-bottom:8px}
.modal p{font-size:13px;color:var(--text-2);margin-bottom:18px}
.share-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.share-btn{padding:14px;background:var(--bg-2);border:1px solid var(--border);border-radius:12px;text-align:center;cursor:pointer;transition:all .2s;font-family:inherit;color:var(--text-2);font-size:13px;font-weight:500}
.share-btn:hover{border-color:var(--accent);color:var(--accent)}
.share-btn .ic{font-size:22px;display:block;margin-bottom:4px}
.toast{position:fixed;bottom:20px;right:20px;padding:12px 22px;background:var(--green);color:var(--bg-0);border-radius:12px;font-size:13px;font-weight:600;transform:translateY(80px);opacity:0;transition:all .3s;z-index:400}
.toast.show{transform:translateY(0);opacity:1}

/* ========== RESPONSIVE ========== */
@media(max-width:500px){.container{padding:0 16px}.hero-section{padding:60px 0 36px}.ep-header h1{font-size:26px;letter-spacing:-1px}.tab{padding:12px 14px;font-size:12px}.overview{gap:28px}.share-grid{grid-template-columns:1fr}.demos-grid{gap:10px}}
</style>
</head>
<body>
<div class="ambient"></div>
<div class="app">
  <!-- NAV -->
  <nav class="nav">
    <div class="container">
      <a class="logo" onclick="resetApp()"><svg class="logo-icon" viewBox="0 0 100 100" width="32" height="32" style="vertical-align:middle;margin-right:6px;margin-top:-3px"><rect width="100" height="100" rx="20" fill="var(--bg-2)"/><g transform="translate(50,48)"><ellipse cx="0" cy="2" rx="18" ry="20" fill="var(--accent)"/><path d="M-18 0c-5-1-9 4-9 10s4 11 9 10" stroke="var(--accent)" stroke-width="5" fill="none" stroke-linecap="round"/><path d="M18 0c5-1 9 4 9 10s-4 11-9 10" stroke="var(--accent)" stroke-width="5" fill="none" stroke-linecap="round"/><path d="M-14-16a8 8 0 0 1 8-8" stroke="var(--accent-hover)" stroke-width="4" fill="none" stroke-linecap="round"/><path d="M14-16a8 8 0 0 0-8-8" stroke="var(--accent-hover)" stroke-width="4" fill="none" stroke-linecap="round"/><rect x="-14" y="-6" width="7" height="5" rx="2" fill="var(--bg-0)"/><rect x="7" y="-6" width="7" height="5" rx="2" fill="var(--bg-0)"/><circle cx="-10" cy="-4" r="2" fill="var(--text-0)"/><circle cx="11" cy="-4" r="2" fill="var(--text-0)"/><path d="M-6 10q6 5 12 0" stroke="var(--bg-0)" stroke-width="2.5" fill="none" stroke-linecap="round"/><path d="M-10 24l-6 14" stroke="var(--accent)" stroke-width="4" stroke-linecap="round"/><path d="M-4 26l-3 14" stroke="var(--accent)" stroke-width="4" stroke-linecap="round"/><path d="M10 24l6 14" stroke="var(--accent)" stroke-width="4" stroke-linecap="round"/><path d="M4 26l3 14" stroke="var(--accent)" stroke-width="4" stroke-linecap="round"/><path d="M-20-2l-8-12" stroke="var(--accent)" stroke-width="3" stroke-linecap="round"/><circle cx="-30" cy="-16" r="3" fill="var(--accent-hover)"/><path d="M20-2l8-12" stroke="var(--accent)" stroke-width="3" stroke-linecap="round"/><circle cx="30" cy="-16" r="3" fill="var(--accent-hover)"/></g></svg>Pod<span>claw</span></a>
      <div class="nav-right">
        <button class="theme-toggle" onclick="toggleTheme()" id="themeBtn" title="Toggle theme">&#127769;</button>
        <button class="btn" onclick="resetApp()">+ New</button>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <section class="hero-section" id="heroSection">
    <div class="container">
      <div class="hero-badge">PODCAST INTELLIGENCE</div>
      <h1>Never Stop <em>Listening.</em> Never Stop <em>Learning.</em></h1>
      <p>Paste a link from Spotify, Apple Podcasts, or any RSS feed â€” get instant summaries, viral clips, key quotes, and interactive Q&A.</p>
      <div class="input-zone">
        <div class="input-wrap">
          <input type="text" id="podInput" placeholder="Paste a Spotify, Apple Podcasts, or RSS link..." onkeydown="if(event.key==='Enter')process()" />
          <button class="input-go" id="clawBtn" onclick="process()">Claw it</button>
        </div>
      </div>
      <!-- DEMO CARDS -->
      <div class="demos-section">
        <div class="demos-label">Try a demo â€” powered by Spotify</div>
        <div class="demos-grid">
          <div class="demo-card" onclick="loadDemo('nicklane')">
            <div class="demo-thumb" style="background:linear-gradient(135deg,#1a5c3a,#0d2f1e)">
              <span class="demo-show-art">Lex Fridman</span>
            </div>
            <div class="demo-ep">Lex Fridman Podcast Â· #318</div>
            <div class="demo-title">Origin of Life, Evolution, Aliens, Biology & Consciousness</div>
            <div class="demo-guest">with Nick Lane</div>
            <div class="demo-meta">
              <span class="demo-tag">3h 48m</span>
              <span class="demo-tag">Biology</span>
              <span class="demo-tag">Science</span>
            </div>
          </div>
          <div class="demo-card" onclick="loadDemo('greene')">
            <div class="demo-thumb" style="background:linear-gradient(135deg,#2a1f5e,#140f30)">
              <span class="demo-show-art">Huberman Lab</span>
            </div>
            <div class="demo-ep">Huberman Lab Â· Guest Series</div>
            <div class="demo-title">A Process for Finding & Achieving Your Unique Purpose</div>
            <div class="demo-guest">with Robert Greene</div>
            <div class="demo-meta">
              <span class="demo-tag">3h 9m</span>
              <span class="demo-tag">Purpose</span>
              <span class="demo-tag">Mastery</span>
            </div>
          </div>
          <div class="demo-card" onclick="loadDemo('musk')">
            <div class="demo-thumb" style="background:linear-gradient(135deg,#5c1a1a,#2f0d0d)">
              <span class="demo-show-art">Joe Rogan</span>
            </div>
            <div class="demo-ep">Joe Rogan Experience Â· #2404</div>
            <div class="demo-title">SpaceX, Tesla, AI, Government, Free Speech & the Future</div>
            <div class="demo-guest">with Elon Musk</div>
            <div class="demo-meta">
              <span class="demo-tag">3h 23m</span>
              <span class="demo-tag">Tech</span>
              <span class="demo-tag">Politics</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- LOADING -->
  <div class="loading" id="loading">
    <div class="spinner" id="loadSpinner"></div>
    <h2 id="loadTitle">Clawing through your podcast...</h2>
    <p class="load-sub" id="loadSub">Extracting the good stuff</p>
    <div class="load-steps" id="loadSteps">
      <div class="load-step" id="step-resolve"><span class="dot">&#10003;</span> Resolving podcast link</div>
      <div class="load-step" id="step-analyze"><span class="dot">&#10003;</span> Sending audio to Gemini AI</div>
      <div class="load-step" id="step-insights"><span class="dot">&#10003;</span> Generating insights &amp; clips</div>
      <div class="load-step" id="step-build"><span class="dot">&#10003;</span> Building your view</div>
    </div>
    <div class="load-error" id="loadError">
      <p id="loadErrorMsg">Something went wrong.</p>
      <button onclick="closeLoading()">Go back</button>
    </div>
  </div>

  <!-- PODCAST VIEW -->
  <div class="podcast-view" id="podView">
    <div class="container">
      <div class="ep-header">
        <div class="ep-show">
          <div class="ep-show-icon">&#127897;</div>
          <span class="ep-show-name" id="epShowName">Podcast</span>
        </div>
        <div class="ep-tags" id="epTags"></div>
        <h1 id="epTitle">Episode Title</h1>
        <div class="guest-line">
          <span class="guest-name" id="epGuest">with Guest</span>
          <div class="guest-info-trigger" id="guestInfo">
            <button class="guest-info-btn" onclick="toggleGuestInfo()" aria-label="Guest information">i</button>
            <div class="guest-tooltip" id="guestTooltip">
              <h4 id="guestTooltipName">Guest</h4>
              <p id="guestTooltipBio">Bio goes here.</p>
              <div class="gt-links" id="guestTooltipLinks"></div>
            </div>
          </div>
        </div>
        <div class="ep-stats" id="epStats"></div>
      </div>
      <!-- Audio Player -->
      <div class="player-wrap" id="playerWrap" style="display:none">
        <div class="audio-player-box">
          <img id="podArt" class="pod-art" src="" alt="">
          <div class="audio-meta">
            <div id="audioShowName" class="audio-show"></div>
            <div id="audioEpTitle" class="audio-ep-title"></div>
          </div>
        </div>
        <audio id="podAudio" controls style="width:100%;margin-top:10px;border-radius:8px;"></audio>
      </div>
    </div>

    <!-- TABS -->
    <div class="tabs">
      <div class="container">
        <button class="tab active" onclick="switchTab('overview')">Overview</button>
        <button class="tab" onclick="switchTab('insights')">Insights <span class="n" id="nInsights">0</span></button>
        <button class="tab" onclick="switchTab('quotes')">Quotes <span class="n" id="nQuotes">0</span></button>
        <button class="tab" onclick="switchTab('clips')">Viral Clips <span class="n" id="nClips">0</span></button>
        <button class="tab" onclick="switchTab('timeline')">Timeline</button>
        <button class="tab" onclick="switchTab('ask')">Ask AI</button>
      </div>
    </div>

    <div class="panels">
      <div class="container">
        <div class="panel active" id="p-overview">
          <div class="overview">
            <div>
              <h2 class="stitle">Episode Summary</h2>
              <div class="rich-text" id="summaryText"></div>
              <h2 class="stitle" style="margin-top:40px">Key Takeaways</h2>
              <div class="takeaways" id="takeawaysList"></div>
            </div>
            <div class="sidebar">
              <div class="side-card"><h3>Topics</h3><div class="topics" id="topicsList"></div></div>
              <div class="side-card"><h3>Chapters</h3><div class="chapters" id="chaptersMini"></div></div>
            </div>
          </div>
        </div>
        <div class="panel" id="p-insights"><div class="insights" id="insightsGrid"></div></div>
        <div class="panel" id="p-quotes"><div class="quotes" id="quotesGrid"></div></div>
        <div class="panel" id="p-clips">
          <p class="clips-intro">Moments most likely to <span style="color:var(--accent);font-weight:600;">resonate, go viral, or spark conversation</span>. Click timestamps to jump to that moment.</p>
          <div class="clips" id="clipsList"></div>
        </div>
        <div class="panel" id="p-timeline"><div class="tl" id="timelineFull"></div></div>
        <div class="panel" id="p-ask">
          <div class="chat">
            <div class="msgs" id="msgs">
              <div class="msg"><div class="msg-av ai">PC</div><div class="msg-bubble"><strong>Hey! I've analyzed this entire podcast.</strong> Ask me anything â€” I can find specific moments, explain arguments, compare viewpoints, or help you create content.</div></div>
            </div>
            <div class="suggestions" id="suggestions"></div>
            <div class="chat-bar">
              <input type="text" class="chat-in" id="chatIn" placeholder="Ask anything about this podcast..." onkeydown="if(event.key==='Enter')sendMsg()" />
              <button class="chat-go" onclick="sendMsg()">Ask</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-bg" id="shareModal" onclick="if(event.target===this)closeModal()">
    <div class="modal"><h2>Share this clip</h2><p>Choose how you'd like to share</p>
      <div class="share-grid">
        <button class="share-btn" onclick="shareAction('twitter')"><span class="ic">&#120143;</span>Twitter/X</button>
        <button class="share-btn" onclick="shareAction('linkedin')"><span class="ic">in</span>LinkedIn</button>
        <button class="share-btn" onclick="shareAction('copy')"><span class="ic">&#128279;</span>Copy Link</button>
        <button class="share-btn" onclick="shareAction('embed')"><span class="ic">&lt;/&gt;</span>Embed</button>
      </div>
    </div>
  </div>
  <div class="toast" id="toast"></div>
</div>

<script>
function loadAudio(mp3Url, artwork, showName, epTitle) {
  const audio = document.getElementById('podAudio');
  const wrap = document.getElementById('playerWrap');
  audio.src = mp3Url;
  wrap.style.display = '';
  document.getElementById('podArt').src = artwork || '';
  document.getElementById('podArt').style.display = artwork ? '' : 'none';
  document.getElementById('audioShowName').textContent = showName || '';
  document.getElementById('audioEpTitle').textContent = epTitle || '';
}

function seekTo(input) {
  const seconds = typeof input === 'number' ? input : timeStrToSeconds(String(input));
  const audio = document.getElementById('podAudio');
  if (audio && audio.src) {
    audio.currentTime = seconds;
    if (audio.paused) audio.play();
    audio.scrollIntoView({ behavior: 'smooth', block: 'center' });
  }
}

function timeStrToSeconds(timeStr) {
  const parts = timeStr.replace(/[~]/g,'').trim().split(':');
  if (parts.length === 3) return +parts[0]*3600 + +parts[1]*60 + +parts[2];
  if (parts.length === 2) return +parts[0]*60 + +parts[1];
  return +parts[0];
}
</script>

<script>
// ============================================================
// STATE
// ============================================================
let currentData = null;
let currentMp3Url = null;


const COLOR_MAP = {
  accent:'var(--accent)', blue:'var(--blue)', green:'var(--green)',
  purple:'var(--purple)', rose:'var(--rose)', yellow:'var(--yellow)'
};
const COLOR_BG_MAP = {
  accent:'var(--accent-glow)', blue:'rgba(91,164,255,0.1)', green:'rgba(61,232,160,0.1)',
  purple:'rgba(176,141,255,0.1)', rose:'rgba(255,107,138,0.1)', yellow:'rgba(255,201,60,0.1)'
};
function mapColor(c) { return COLOR_MAP[c] || 'var(--accent)'; }
function mapColorBg(c) { return COLOR_BG_MAP[c] || 'var(--accent-glow)'; }

// ============================================================
// LOADING STEPS
// ============================================================
function setStep(id, state) {
  const el = document.getElementById('step-' + id);
  if (!el) return;
  el.classList.remove('vis','done','error');
  if (state === 'active') el.classList.add('vis');
  if (state === 'done') el.classList.add('vis','done');
  if (state === 'error') el.classList.add('vis','error');
}
function showLoadError(msg) {
  document.getElementById('loadSpinner').style.display = 'none';
  document.getElementById('loadTitle').textContent = 'Oops!';
  document.getElementById('loadSub').textContent = '';
  document.getElementById('loadErrorMsg').textContent = msg;
  document.getElementById('loadError').classList.add('active');
}
function closeLoading() {
  document.getElementById('loading').classList.remove('active');
  document.getElementById('loadSpinner').style.display = '';
  document.getElementById('loadTitle').textContent = 'Clawing through your podcast...';
  document.getElementById('loadSub').textContent = 'Extracting the good stuff';
  document.getElementById('loadError').classList.remove('active');
  document.querySelectorAll('.load-step').forEach(s => s.classList.remove('vis','done','error'));
}

// ============================================================
// MAIN PROCESS â€” PODCAST PIPELINE
// ============================================================
async function processPodcast(podcastUrl) {
  const loading = document.getElementById('loading');
  loading.classList.add('active');

  try {
    // Step 1: Resolve podcast link
    setStep('resolve', 'active');
    const rRes = await fetch('/api/resolve', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ url: podcastUrl })
    });
    const rData = await rRes.json();
    if (!rRes.ok) throw new Error(rData.error || 'Failed to resolve podcast link');
    setStep('resolve', 'done');

    // Step 2: Send audio to Gemini
    setStep('analyze', 'active');
    const aRes = await fetch('/api/analyze', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ mp3Url: rData.mp3Url, title: rData.title, show: rData.show })
    });
    const aData = await aRes.json();
    if (!aRes.ok) {
      const details = aData.errorDetails ? ` | ${JSON.stringify(aData.errorDetails)}` : '';
      throw new Error((aData.error || 'Failed to analyze podcast') + details);
    }
    setStep('analyze', 'done');

    // Step 3: Process insights
    setStep('insights', 'active');
    currentData = aData;
    currentMp3Url = rData.mp3Url;
    await new Promise(r => setTimeout(r, 400));
    setStep('insights', 'done');

    // Step 4: Build view
    setStep('build', 'active');
    renderData(aData);
    await new Promise(r => setTimeout(r, 300));
    setStep('build', 'done');

    await new Promise(r => setTimeout(r, 500));
    loading.classList.remove('active');
    document.getElementById('heroSection').classList.add('collapsed');
    document.getElementById('podView').classList.add('active');
    document.querySelectorAll('.load-step').forEach(s => s.classList.remove('vis','done'));
    loadAudio(rData.mp3Url, rData.artwork, rData.show, rData.title);

  } catch (err) {
    console.error('Pipeline error:', err);
    setStep('resolve', document.getElementById('step-resolve')?.classList.contains('done') ? 'done' : 'error');
    setStep('analyze', document.getElementById('step-analyze')?.classList.contains('done') ? 'done' : 'error');
    showLoadError(err.message);
  }
}

// ============================================================
// RENDER DATA (works for both demo & real data)
// ============================================================
function renderData(data) {
  const m = data.metadata || {};

  // Header
  document.getElementById('epShowName').textContent = m.show || 'Podcast';
  document.getElementById('epTitle').textContent = m.title || 'Untitled Episode';
  document.getElementById('epGuest').textContent = m.guest ? `with ${m.guest}` : '';
  document.getElementById('guestTooltipName').textContent = m.guest || 'Guest';
  document.getElementById('guestTooltipBio').innerHTML = m.guestBio || '';
  const linksEl = document.getElementById('guestTooltipLinks');
  linksEl.innerHTML = (m.guestLinks || []).map(l =>
    `<a class="gt-link" href="${l.url}" target="_blank" rel="noopener">${l.label}</a>`
  ).join('');

  const tags = [];
  if (m.episode) tags.push(m.episode);
  if (m.date) tags.push(m.date);
  if (m.duration) tags.push(m.duration);
  document.getElementById('epTags').innerHTML = tags.map(t => `<span class="ep-tag">${t}</span>`).join('');

  const stats = [];
  if (data.chapters) stats.push(`&#128214; ${data.chapters.length} chapters`);
  if (data.insights) stats.push(`&#9889; ${data.insights.length} insights`);
  if (data.quotes) stats.push(`&#128172; ${data.quotes.length} quotes`);
  if (data.clips) stats.push(`&#128293; ${data.clips.length} viral clips`);
  document.getElementById('epStats').innerHTML = stats.map(s => `<span class="stat">${s}</span>`).join('');

  if (data.insights) document.getElementById('nInsights').textContent = data.insights.length;
  if (data.quotes) document.getElementById('nQuotes').textContent = data.quotes.length;
  if (data.clips) document.getElementById('nClips').textContent = data.clips.length;

  // Summary
  document.getElementById('summaryText').innerHTML = data.summary || '<p>No summary available.</p>';

  // Takeaways
  document.getElementById('takeawaysList').innerHTML = (data.takeaways || []).map(tk =>
    `<div class="tk">
      <div class="tk-icon" style="background:${mapColorBg(tk.color)};color:${mapColor(tk.color)}">${tk.icon || 'ðŸ’¡'}</div>
      <div><h4>${tk.title}</h4><p>${tk.text}</p></div>
    </div>`
  ).join('');

  // Topics
  document.getElementById('topicsList').innerHTML = (data.topics || []).map(t =>
    `<span class="topic">${t}</span>`
  ).join('');

  // Chapters â€” clicking seeks the player
  document.getElementById('chaptersMini').innerHTML = (data.chapters || []).map(c => {
    const secs = timeStrToSeconds(c.time);
    return `<a class="ch" href="javascript:void(0)" onclick="seekTo(${secs})"><span class="ch-time">${c.time}</span><span class="ch-name">${c.name}</span></a>`;
  }).join('');

  // Insights
  document.getElementById('insightsGrid').innerHTML = (data.insights || []).map(i => {
    const color = mapColor(i.color);
    const secs = timeStrToSeconds(i.timestamp);
    return `<div class="ins" style="--c:${color}">
      <div class="ins-label" style="color:${color}">${i.label}</div>
      <h3>${i.title}</h3><p>${i.text}</p>
      <div class="ts"><button class="ts-link" onclick="seekTo(${secs})">&#9201; ${i.timestamp}</button></div>
    </div>`;
  }).join('');

  // Quotes
  document.getElementById('quotesGrid').innerHTML = (data.quotes || []).map(q =>
    `<div class="q"><div class="q-mark">&ldquo;</div>
      <div class="q-text">${q.text}</div>
      <div class="q-foot"><span class="q-who">${q.speaker}</span>
        <div class="q-acts">
          <button class="q-act" onclick="copyQ(this)" title="Copy">&#128203;</button>
          <button class="q-act" onclick="openModal()" title="Share">&#8599;</button>
        </div>
      </div>
    </div>`
  ).join('');

  // Clips â€” clicking timestamps seeks the player
  document.getElementById('clipsList').innerHTML = (data.clips || []).map((c, i) => {
    const secs = timeStrToSeconds(c.timestamp);
    return `<div class="clip">
      <div class="clip-num">${String(i+1).padStart(2,'0')}</div>
      <div class="clip-body"><h3>${c.title}</h3><p>${c.text}</p>
        <div class="clip-meta"><button class="clip-time" onclick="seekTo(${secs})">&#9201; ${c.timestamp}</button>${(c.tags||[]).map(t=>`<span class="clip-tag">${t}</span>`).join('')}
          <button class="btn clip-share" onclick="openModal()" style="margin-left:auto">&#8599; Share</button>
        </div>
      </div>
    </div>`;
  }).join('');

  // Timeline â€” clicking timestamps seeks the player
  document.getElementById('timelineFull').innerHTML = (data.timeline || []).map(t => {
    const secs = timeStrToSeconds(t.startTime);
    return `<div class="tl-e"><div class="tl-dot"></div>
      <div class="tl-e-time"><button class="ts-link" onclick="seekTo(${secs})">${t.startTime} â€“ ${t.endTime}</button></div>
      <h3>${t.title}</h3><p>${t.text}</p>
      <div class="tl-tags">${(t.tags||[]).map(tg=>`<span class="tl-tag">${tg}</span>`).join('')}</div>
    </div>`;
  }).join('');

  // Chat suggestions
  const sugQ = [
    data.metadata?.guest ? `What is ${data.metadata.guest}'s main argument?` : null,
    'Summarize this in 3 bullet points',
    'What are the most controversial claims?',
    'Write a tweet thread from this episode',
    'What surprised you most about this conversation?',
  ].filter(Boolean);
  document.getElementById('suggestions').innerHTML = sugQ.map(q =>
    `<button class="sug" onclick="askSug(this)">${q}</button>`
  ).join('');
}

// ============================================================
// DEMO DATA
// ============================================================
const DEMOS = {
  nicklane: {
    spotifyUrl: 'https://open.spotify.com/episode/18GOIf00XC3jB7FuVZ2SM2',
    data: {
      metadata: {
        title: 'Origin of Life, Evolution, Aliens, Biology, and Consciousness',
        guest: 'Nick Lane',
        guestBio: 'Biochemist at <em>University College London</em> and author of <em>Transformer</em>, <em>The Vital Question</em>, <em>Power, Sex, Suicide</em>, and <em>Life Ascending</em>. One of the most influential thinkers on the origin and evolution of life.',
        guestLinks: [{label:'UCL Profile',url:'https://www.ucl.ac.uk/biosciences/people/nick-lane'},{label:'Wikipedia',url:'https://en.wikipedia.org/wiki/Nick_Lane'}],
        show: 'Lex Fridman Podcast', episode: 'Episode #318', date: 'Sep 7, 2022', duration: '3h 48m'
      },
      summary: `<p>In this <em>nearly four-hour deep dive</em>, biochemist <span class="hl">Nick Lane</span> takes Lex Fridman on a journey through the most fundamental question in science: <span class="hl-blue">how did life begin?</span> Lane argues that life didn't emerge from a single miraculous spark, but from a <em>continuous chemical reaction</em> driven by the interaction of <span class="hl-green">carbon dioxide and hydrogen</span> at deep-sea hydrothermal vents, powered by natural proton gradients eerily similar to those used by living cells today.</p><p>The conversation spans the full sweep of evolution â€” from the <span class="hl-purple">origin of the first cells</span> to the momentous leap from prokaryotes to eukaryotes (which Lane calls <em>the most important event in the history of life</em>), the invention of <span class="hl-green">photosynthesis</span>, the mystery of <span class="hl-blue">consciousness</span>, and the tantalizing question of whether <em>alien life</em> might follow similar biochemical pathways. Lane challenges the idea of panspermia and makes a compelling case that the chemistry of life is <span class="hl-green">deeply predictable</span> given the right conditions.</p><p>Throughout, Lane weaves together <span class="hl-purple">thermodynamics, biochemistry, and evolutionary theory</span> into a unified narrative about why life is the way it is â€” and why understanding <em>energy</em> is the key to understanding everything from the first cell to human consciousness.</p>`,
      takeaways: [
        {icon:'\u{1F52C}',color:'accent',title:'Life Began at Hydrothermal Vents',text:'The reaction between CO\u2082 and H\u2082 at alkaline vents created organic molecules â€” no lightning bolt needed, just <em>continuous chemistry</em>.'},
        {icon:'\u{26A1}',color:'blue',title:'Energy Drives Everything',text:'Proton gradients across membranes are the <em>universal currency of life</em>. Every living cell uses them, and they existed before life itself.'},
        {icon:'\u{1F9EC}',color:'green',title:'The Eukaryotic Leap Was Singular',text:'The jump from simple to complex cells happened <em>exactly once</em> in 4 billion years â€” when an archaeon engulfed a bacterium that became mitochondria.'},
        {icon:'\u{1F30D}',color:'purple',title:'Alien Life May Be Biochemically Similar',text:'If the chemistry of life is predictable, aliens would likely use <em>similar metabolic pathways</em>, not silicon-based weirdness.'},
        {icon:'\u{1F9E0}',color:'rose',title:'Consciousness Is a Deep Biological Puzzle',text:'Consciousness may be rooted in the <em>electrical properties of living cells</em>, not just neural computation.'}
      ],
      topics: ['Origin of Life','Hydrothermal Vents','Evolution','Proton Gradients','Mitochondria','Eukaryotes','Photosynthesis','Panspermia','Alien Life','Consciousness','Biochemistry','Thermodynamics','DNA','RNA World','Natural Selection'],
      chapters: [
        {time:'0:00',name:'Introduction'},
        {time:'5:45',name:'Origin of life'},
        {time:'19:31',name:'Panspermia'},
        {time:'25:05',name:'What is life?'},
        {time:'38:20',name:'Photosynthesis'},
        {time:'41:55',name:'Prokaryotic vs eukaryotic cells'},
        {time:'51:56',name:'Sex'},
        {time:'59:39',name:'DNA'},
        {time:'1:06:51',name:'Violence'},
        {time:'1:17:25',name:'Human evolution'},
        {time:'1:23:21',name:'Neanderthals'},
        {time:'1:26:53',name:'Sensory inputs'},
        {time:'1:37:43',name:'Consciousness'},
        {time:'2:09:17',name:'AI and biology'},
        {time:'2:38:36',name:'Evolution'},
        {time:'2:59:07',name:'Fermi paradox'},
        {time:'3:12:27',name:'Cities'},
        {time:'3:20:14',name:'Depression'},
        {time:'3:22:50',name:'Writing'},
        {time:'3:30:49',name:'Advice for young people'},
        {time:'3:37:57',name:'Earth'}
      ],
      insights: [
        {label:'\u{1F52C} Core Thesis',color:'accent',title:'Life is a chemical reaction that never stopped',text:'There was no single "spark." Life emerged from <em>continuous thermodynamic reactions</em> between CO\u2082 and H\u2082, driven by natural proton gradients at alkaline hydrothermal vents.',timestamp:'5:45'},
        {label:'\u{26A1} Key Mechanism',color:'blue',title:'Proton gradients are the universal engine',text:'Every living cell on Earth uses proton gradients across membranes to generate energy. This mechanism is <em>older than DNA</em> and may be the most conserved feature of life.',timestamp:'59:39'},
        {label:'\u{1F9EC} Evolutionary Milestone',color:'green',title:'Eukaryotes: the most important event in biology',text:'A single endosymbiotic event â€” an archaeon swallowing a bacterium â€” created the <em>mitochondria-powered eukaryotic cell</em>, enabling all complex life.',timestamp:'41:55'},
        {label:'\u{1F6D1} Paradigm Challenge',color:'purple',title:'Panspermia doesn\'t solve the origin problem',text:'Even if life arrived from space, it still had to <em>originate somewhere</em> under similar chemical conditions. Panspermia just moves the question.',timestamp:'19:31'},
        {label:'\u{2600}\u{FE0F} Breakthrough',color:'yellow',title:'Photosynthesis nearly destroyed life',text:'The Great Oxidation Event was a <em>catastrophe for anaerobic life</em>, but it enabled the explosion of complex organisms that breathe oxygen.',timestamp:'38:20'},
        {label:'\u{1F47D} Speculation',color:'rose',title:'Aliens would share our biochemistry',text:'The laws of thermodynamics constrain biology universally. Alien life would likely use <em>similar metabolic chemistry</em>, not exotic alternatives.',timestamp:'2:59:07'},
        {label:'\u{1F9E0} Frontier',color:'blue',title:'Consciousness may be electromagnetic',text:'Lane suggests consciousness could be tied to the <em>bioelectric fields</em> generated by living cells, not purely computational.',timestamp:'1:37:43'},
        {label:'\u{1F4D6} Historical',color:'green',title:'RNA World is incomplete',text:'The popular RNA-first hypothesis misses the <em>energy problem</em>. You need a continuous energy source before self-replication matters.',timestamp:'25:05'}
      ],
      quotes: [
        {text:'The origin of life is not a problem of information. It\'s a problem of energy. Get the energy right and the information follows.',speaker:'Nick Lane'},
        {text:'Life is a continuous chemical reaction. It started and it never stopped. There was no moment of creation â€” just chemistry finding a groove.',speaker:'Nick Lane'},
        {text:'Every living cell on this planet uses proton gradients. That\'s not a coincidence â€” it\'s a fossil of how life began.',speaker:'Nick Lane'},
        {text:'The jump from bacteria to complex cells happened once in four billion years. Once. That tells you how hard it was.',speaker:'Nick Lane'},
        {text:'Panspermia doesn\'t solve anything. You still need to explain how life started on whatever rock it came from.',speaker:'Nick Lane'},
        {text:'Oxygen was the worst pollution event in the history of the planet. It killed almost everything. And then it made everything else possible.',speaker:'Nick Lane'},
        {text:'If there\'s life on other planets, I\'d bet it uses proton gradients too. The thermodynamics almost demand it.',speaker:'Nick Lane'},
        {text:'Consciousness is the hard problem, and I suspect it\'s tied to something deep about the electrical nature of living matter.',speaker:'Nick Lane'},
        {text:'We are not separate from chemistry. We are chemistry that became aware of itself.',speaker:'Nick Lane'},
        {text:'The RNA World hypothesis puts the cart before the horse. You need energy before you need replication.', speaker:'Nick Lane'}
      ],
      clips: [
        {title:'"Life Never Stopped Reacting"',text:'Lane\'s striking reframe â€” life isn\'t a thing that <em>started</em>, it\'s a chemical reaction that <em>found a groove and never stopped</em>.',timestamp:'5:45',tags:['\u{1F525} High Viral','Origin of Life']},
        {title:'The Proton Gradient Fossil',text:'Every living cell uses the same energy mechanism â€” a <em>4-billion-year-old fossil</em> of how life began.',timestamp:'59:39',tags:['\u{1F4DA} Educational','Biochemistry']},
        {title:'The One-Time Eukaryotic Miracle',text:'Complex life happened <em>exactly once</em> in the entire history of Earth. The implications are staggering.',timestamp:'41:55',tags:['\u{1F525} High Viral','Evolution']},
        {title:'Oxygen: The Great Catastrophe',text:'Photosynthesis poisoned the planet with oxygen â€” <em>mass extinction that enabled everything</em> we see today.',timestamp:'38:20',tags:['\u{1F4DA} Educational','History']},
        {title:'Aliens Use Proton Gradients Too',text:'A bold prediction: extraterrestrial life would share <em>our fundamental biochemistry</em>.',timestamp:'2:59:07',tags:['\u{1F525} High Viral','Aliens']},
        {title:'"We Are Chemistry Aware of Itself"',text:'Lane\'s poetic summary of the human condition â€” <em>matter that learned to wonder</em>.',timestamp:'3:37:57',tags:['\u{1F48E} Quotable','Philosophy']}
      ],
      timeline: [
        {startTime:'0:00',endTime:'5:45',title:'Introduction',text:'Lex introduces Nick Lane and frames the central question: <em>how did life begin?</em>',tags:['Setup']},
        {startTime:'5:45',endTime:'19:31',title:'The Origin of Life',text:'Lane explains the thermodynamic basis of life â€” <em>CO\u2082 + H\u2082 reactions</em> at hydrothermal vents.',tags:['Origin','Chemistry','Key Section']},
        {startTime:'19:31',endTime:'25:05',title:'Panspermia Debate',text:'Why the idea that life came from space <em>doesn\'t solve the fundamental problem</em>.',tags:['Panspermia','Debate']},
        {startTime:'25:05',endTime:'38:20',title:'What Is Life?',text:'Defining life through <em>thermodynamics and energy flow</em> rather than DNA and replication.',tags:['Definition','Philosophy']},
        {startTime:'38:20',endTime:'41:55',title:'Photosynthesis',text:'How photosynthesis evolved and <em>transformed Earth\'s atmosphere</em> forever.',tags:['Photosynthesis','Key Section']},
        {startTime:'41:55',endTime:'51:56',title:'Prokaryotic vs. Eukaryotic Cells',text:'The leap from simple to complex cells â€” <em>the most important event in the history of life</em>.',tags:['Eukaryotes','Evolution']},
        {startTime:'51:56',endTime:'59:39',title:'Sex & Reproduction',text:'Why sexual reproduction evolved and <em>accelerated adaptation</em>.',tags:['Sex','Natural Selection']},
        {startTime:'59:39',endTime:'1:06:51',title:'DNA',text:'The mechanics of genetic information, replication, and <em>the code of life</em>.',tags:['DNA','Genetics']},
        {startTime:'1:06:51',endTime:'1:17:25',title:'Violence in Nature',text:'The role of competition, predation, and <em>violence in driving evolution</em>.',tags:['Violence','Evolution']},
        {startTime:'1:17:25',endTime:'1:23:21',title:'Human Evolution',text:'How humans diverged from other primates and <em>what makes us unique</em>.',tags:['Humans','Evolution']},
        {startTime:'1:23:21',endTime:'1:26:53',title:'Neanderthals',text:'Our closest relatives â€” what happened to them and <em>what we inherited</em>.',tags:['Neanderthals','History']},
        {startTime:'1:26:53',endTime:'1:37:43',title:'Sensory Inputs',text:'How organisms evolved to <em>perceive and interact with</em> their environment.',tags:['Senses','Biology']},
        {startTime:'1:37:43',endTime:'2:09:17',title:'Consciousness',text:'The hard problem and the possibility that awareness is tied to <em>bioelectric fields</em>.',tags:['Consciousness','Philosophy','Key Section']},
        {startTime:'2:09:17',endTime:'2:38:36',title:'AI and Biology',text:'Parallels and differences between <em>artificial and biological intelligence</em>.',tags:['AI','Biology']},
        {startTime:'2:38:36',endTime:'2:59:07',title:'Evolution',text:'Deep patterns of evolution and <em>what drives adaptation</em> over billions of years.',tags:['Evolution','Theory']},
        {startTime:'2:59:07',endTime:'3:12:27',title:'Fermi Paradox & Alien Life',text:'Why extraterrestrial biochemistry might be <em>more familiar than we expect</em>.',tags:['Aliens','Astrobiology','Key Section']},
        {startTime:'3:12:27',endTime:'3:20:14',title:'Cities & Civilization',text:'How human settlements mirror <em>biological organization</em>.',tags:['Cities','Civilization']},
        {startTime:'3:20:14',endTime:'3:22:50',title:'Depression',text:'The biology of depression and <em>its evolutionary roots</em>.',tags:['Depression','Mental Health']},
        {startTime:'3:22:50',endTime:'3:30:49',title:'Writing',text:'Lane on the craft of <em>communicating science</em> to the public.',tags:['Writing','Science Communication']},
        {startTime:'3:30:49',endTime:'3:37:57',title:'Advice for Young People',text:'Lane\'s guidance for aspiring scientists and <em>curious minds</em>.',tags:['Advice','Career']},
        {startTime:'3:37:57',endTime:'3:48:00',title:'Earth & Wonder',text:'Lane reflects on the <em>beauty of understanding</em> our place on this planet.',tags:['Closing','Philosophy']}
      ]
    }
  },

  greene: {
    spotifyUrl: 'https://open.spotify.com/episode/6E6kZoPEr0JlSjRM1msB3D',
    data: {
      metadata: {
        title: 'A Process for Finding & Achieving Your Unique Purpose',
        guest: 'Robert Greene',
        guestBio: 'Multiple <em>New York Times</em> bestselling author of <em>The 48 Laws of Power</em>, <em>Mastery</em>, <em>The Art of Seduction</em>, and <em>The Laws of Human Nature</em>. One of the most influential thinkers on strategy, power dynamics, and human psychology.',
        guestLinks: [{label:'Website',url:'https://powerseductionandwar.com/'},{label:'Wikipedia',url:'https://en.wikipedia.org/wiki/Robert_Greene_(American_author)'}],
        show: 'Huberman Lab', episode: 'Guest Series', date: 'Dec 4, 2023', duration: '3h 9m'
      },
      summary: `<p>In this <em>profound conversation</em>, <span class="hl">Robert Greene</span> joins Andrew Huberman to explore the science and strategy of <span class="hl-blue">finding your life's purpose</span>. Greene draws from his book <em>Mastery</em> to argue that every person has a <span class="hl-green">"Life\'s Task"</span> â€” a unique calling rooted in childhood fascinations that, when pursued with discipline, leads to extraordinary achievement and deep fulfillment.</p><p>The discussion spans <span class="hl-purple">practical frameworks for self-discovery</span>: how to decode early inclinations, choose the right mentors, survive the apprenticeship phase, and develop <em>creative intuition</em> through years of deliberate practice. Greene shares how figures like <span class="hl">Einstein, Darwin, and Steve Jobs</span> turned childhood obsessions into world-changing careers â€” and how anyone can follow a similar path.</p><p>In a deeply personal turn, Greene opens up about his <span class="hl">recent stroke</span> and near-death experience, revealing how confronting mortality <em>radically sharpened</em> his appreciation for time, creativity, and human connection. The conversation also dives into <span class="hl-blue">power dynamics</span>, the crisis of <span class="hl-green">modern distraction and "avatarization"</span>, the lost art of <em>nonverbal communication</em>, and why mastering these domains is more urgent than ever in the age of AI and social media.</p>`,
      takeaways: [
        {icon:'\u{1F3AF}',color:'accent',title:'Everyone Has a Life\'s Task',text:'Your purpose is encoded in <em>childhood fascinations</em> â€” the activities that captivated you before the world told you to be practical.'},
        {icon:'\u{1F9D8}',color:'blue',title:'Mastery Requires 10,000 Hours of the Right Practice',text:'Not just repetition â€” <em>deliberate, focused practice</em> with increasing challenge under guidance of mentors.'},
        {icon:'\u{1F480}',color:'purple',title:'Confronting Death Unlocks Urgency',text:'Greene\'s stroke taught him that <em>mortality awareness</em> is the most powerful motivator for authentic living.'},
        {icon:'\u{1F4F1}',color:'green',title:'Social Media Is Destroying Purpose',text:'The "avatarization" of identity â€” reducing yourself to an <em>online persona</em> â€” erodes the deep self-knowledge needed to find purpose.'},
        {icon:'\u{1F91D}',color:'rose',title:'Nonverbal Intelligence Is Atrophying',text:'We\'re losing the ability to <em>read people in person</em>, a skill that\'s critical for leadership, love, and mastery.'}
      ],
      topics: ['Life Purpose','Mastery','Power Dynamics','Mentorship','Apprenticeship','Creativity','Robert Greene','Stroke Recovery','Nonverbal Communication','Social Media','Avatarization','Self-Awareness','Childhood Passions','Deliberate Practice','Human Nature','Relationships'],
      chapters: [
        {time:'0:00',name:'Introduction'},
        {time:'5:56',name:'Mastery & purpose'},
        {time:'8:26',name:'Finding purpose & childhood'},
        {time:'18:00',name:'Early interests & discovery'},
        {time:'22:50',name:'Love, delight & emotional engagement'},
        {time:'35:00',name:'Choosing mentors wisely'},
        {time:'50:00',name:'The apprenticeship phase'},
        {time:'1:08:00',name:'Creative intuition & mastery'},
        {time:'1:24:00',name:'Greene\'s stroke & near-death experience'},
        {time:'1:42:00',name:'Power dynamics & relationships'},
        {time:'1:55:00',name:'Nonverbal communication & seduction'},
        {time:'2:15:00',name:'Social media & avatarization'},
        {time:'2:35:00',name:'Anxiety, creativity & finding purpose today'},
        {time:'2:55:00',name:'Closing reflections'},
        {time:'3:05:00',name:'Sponsors & newsletter'}
      ],
      insights: [
        {label:'\u{1F3AF} Framework',color:'accent',title:'Your Life\'s Task is hidden in childhood',text:'Before society imposed expectations, you were <em>naturally drawn to certain activities</em>. That pull is the signal. Greene calls it your "primal inclination."',timestamp:'8:00'},
        {label:'\u{1F9D1}\u200D\u{1F3EB} Strategy',color:'blue',title:'The mentor relationship is a power dynamic',text:'Choose mentors who <em>genuinely want to develop you</em>, not those who use apprentices as labor. The right mentor accelerates mastery by years.',timestamp:'38:00'},
        {label:'\u{1F480} Personal',color:'purple',title:'A stroke at 65 changed everything',text:'Greene\'s near-death experience stripped away pretense and <em>made every day feel urgent</em>. He now sees mortality awareness as a creative superpower.',timestamp:'1:24:00'},
        {label:'\u{26A0}\u{FE0F} Warning',color:'rose',title:'We\'re becoming avatars of ourselves',text:'Social media reduces humans to <em>simplified online personas</em>, disconnecting us from the deep, nuanced self-knowledge needed to find purpose.',timestamp:'2:08:00'},
        {label:'\u{1F50D} Practical',color:'green',title:'The apprenticeship has three phases',text:'Observation, skills acquisition, experimentation â€” each phase requires <em>different strategies and humility</em>.',timestamp:'52:00'},
        {label:'\u{1F5E3}\u{FE0F} Social',color:'yellow',title:'Nonverbal communication is a dying art',text:'Dating apps and texting have <em>atrophied our ability to read body language</em>, tone, and micro-expressions â€” skills that define great leaders.',timestamp:'1:55:00'},
        {label:'\u{1F4A1} Creative',color:'blue',title:'Mastery produces creative intuition',text:'After years of deep practice, the brain develops <em>unconscious pattern recognition</em> that feels like intuition but is actually earned expertise.',timestamp:'1:08:00'},
        {label:'\u{2694}\u{FE0F} Power',color:'accent',title:'Power dynamics pervade every relationship',text:'Understanding power is not about manipulation â€” it\'s about <em>seeing reality clearly</em> and navigating human nature with awareness.',timestamp:'1:42:00'}
      ],
      quotes: [
        {text:'Your Life\'s Task is not something you choose. It\'s something you uncover. It\'s been there since childhood, waiting for you to pay attention.',speaker:'Robert Greene'},
        {text:'The problem with the modern world is that we\'re so distracted, we can\'t hear the inner voice telling us what we were meant to do.',speaker:'Robert Greene'},
        {text:'Mastery is not about talent. It\'s about loving the process so deeply that you put in the hours nobody else is willing to.',speaker:'Robert Greene'},
        {text:'My stroke was the greatest teacher I ever had. It taught me that urgency is not stress â€” it\'s clarity.',speaker:'Robert Greene'},
        {text:'We\'re turning ourselves into avatars online â€” flattened, simplified versions of who we actually are. And we\'re losing ourselves in the process.',speaker:'Robert Greene'},
        {text:'The best mentor is someone who sees something in you that you don\'t yet see in yourself.',speaker:'Robert Greene'},
        {text:'Nonverbal communication is the oldest language humans have. We\'re letting it die because we\'re addicted to screens.',speaker:'Robert Greene'},
        {text:'Power is not evil. It\'s a fact of human nature. The question is whether you wield it consciously or let others wield it over you.',speaker:'Robert Greene'},
        {text:'Einstein was obsessed with invisible forces as a child. That obsession became the theory of relativity. Your obsession is your compass.',speaker:'Robert Greene'},
        {text:'The apprenticeship phase is supposed to be humbling. That\'s not a bug â€” it\'s the feature. Humility opens the door to real learning.',speaker:'Robert Greene'}
      ],
      clips: [
        {title:'Your Purpose Was There All Along',text:'Greene\'s powerful framework: your Life\'s Task is <em>hidden in childhood fascinations</em>, waiting to be uncovered.',timestamp:'8:00',tags:['\u{1F525} High Viral','Purpose']},
        {title:'A Stroke Changed Everything',text:'Greene\'s deeply personal story of confronting death and emerging with <em>radical clarity</em> about what matters.',timestamp:'1:24:00',tags:['\u{1F525} High Viral','Personal']},
        {title:'We\'re Becoming Avatars',text:'The crisis of identity in the social media age â€” <em>losing ourselves to simplified online personas</em>.',timestamp:'2:08:00',tags:['\u{1F525} High Viral','Culture']},
        {title:'Einstein\'s Childhood Obsession',text:'How a boy fascinated by <em>invisible forces</em> became the greatest physicist in history.',timestamp:'22:00',tags:['\u{1F4DA} Educational','Mastery']},
        {title:'The Lost Art of Reading People',text:'We\'re losing our ability to <em>read body language and micro-expressions</em> â€” with profound consequences.',timestamp:'1:55:00',tags:['\u{1F4A1} Insightful','Communication']},
        {title:'"Humility Opens the Door"',text:'Why the apprenticeship phase is supposed to be <em>uncomfortable</em> â€” and why that\'s exactly the point.',timestamp:'52:00',tags:['\u{1F48E} Quotable','Advice']}
      ],
      timeline: [
        {startTime:'0:00',endTime:'5:56',title:'Introduction',text:'Huberman introduces Robert Greene and frames the episode around <em>purpose and mastery</em>.',tags:['Setup']},
        {startTime:'5:56',endTime:'18:00',title:'Mastery & Finding Purpose',text:'Greene explains his core concept from <em>Mastery</em>: everyone has a unique calling encoded in early inclinations.',tags:['Purpose','Framework','Key Section']},
        {startTime:'18:00',endTime:'35:00',title:'Childhood Clues & Emotional Engagement',text:'How Einstein, Darwin, and Jobs turned <em>childhood obsessions</em> into revolutionary careers.',tags:['Examples','Childhood']},
        {startTime:'35:00',endTime:'50:00',title:'Choosing Mentors',text:'The art of finding mentors who <em>genuinely develop you</em> vs. those who exploit apprentices.',tags:['Mentorship','Strategy']},
        {startTime:'50:00',endTime:'1:08:00',title:'The Apprenticeship Phase',text:'Three stages â€” observation, skills, experimentation â€” and why <em>humility is essential</em>.',tags:['Apprenticeship','Mastery']},
        {startTime:'1:08:00',endTime:'1:24:00',title:'Creative Intuition & Mastery',text:'How deep practice produces <em>unconscious pattern recognition</em> that feels like genius.',tags:['Creativity','Mastery','Key Section']},
        {startTime:'1:24:00',endTime:'1:42:00',title:'Stroke & Near-Death Experience',text:'Greene\'s deeply personal story of his stroke and how <em>mortality awareness transforms priorities</em>.',tags:['Personal','Mortality','Key Section']},
        {startTime:'1:42:00',endTime:'1:55:00',title:'Power Dynamics & Relationships',text:'Understanding power as <em>reality perception</em>, not manipulation.',tags:['Power','Relationships']},
        {startTime:'1:55:00',endTime:'2:15:00',title:'Nonverbal Communication & Seduction',text:'The dying art of reading people and why <em>in-person skills matter more than ever</em>.',tags:['Communication','Social Skills']},
        {startTime:'2:15:00',endTime:'2:35:00',title:'Avatarization & Social Media',text:'How we\'re <em>flattening our identities</em> online and losing connection to our true selves.',tags:['Social Media','Identity']},
        {startTime:'2:35:00',endTime:'2:55:00',title:'Anxiety, Creativity & Purpose Today',text:'Practical advice for <em>navigating distraction</em> and reconnecting with your Life\'s Task.',tags:['Advice','Modern Life']},
        {startTime:'2:55:00',endTime:'3:09:00',title:'Closing Reflections',text:'Greene and Huberman reflect on <em>urgency, gratitude, and the beauty of mastery</em>.',tags:['Closing','Philosophy']}
      ]
    }
  },

  musk: {
    spotifyUrl: 'https://open.spotify.com/episode/6vBr2kDnmrUu17xdiRVbXR',
    data: {
      metadata: {
        title: 'SpaceX, Tesla, AI, Government, Free Speech & the Future',
        guest: 'Elon Musk',
        guestBio: 'CEO of <em>Tesla</em> and <em>SpaceX</em>, owner of <em>X</em> (formerly Twitter), founder of <em>xAI</em>, <em>Neuralink</em>, and <em>The Boring Company</em>. The world\'s wealthiest person and one of the most polarizing figures in technology and politics.',
        guestLinks: [{label:'X Profile',url:'https://x.com/elonmusk'},{label:'Wikipedia',url:'https://en.wikipedia.org/wiki/Elon_Musk'}],
        show: 'The Joe Rogan Experience', episode: 'Episode #2404', date: 'Oct 31, 2025', duration: '3h 23m'
      },
      summary: `<p>In this <em>wide-ranging three-and-a-half-hour conversation</em>, <span class="hl">Elon Musk</span> returns to Joe Rogan\'s studio for a sprawling discussion covering <span class="hl-blue">SpaceX\'s latest milestones</span>, Tesla\'s Cybertruck and the long-awaited Roadster, and the rapid advancement of AI through his company <em>xAI</em>. Musk recounts the recent <span class="hl-green">Starship orbital flight</span>, describing the engineering feat of landing a spacecraft after circling the globe.</p><p>The conversation takes pointed political turns as Musk discusses his <span class="hl-purple">acquisition of Twitter</span> (now X) as a battle against what he calls a "nihilistic anti-civilizational mind virus," and dives into <span class="hl">government waste and fraud</span> â€” highlighting staggering inefficiencies in Social Security databases and billions wasted on programs like California\'s homelessness spending. Rogan and Musk explore <em>encrypted messaging security</em>, the <span class="hl-blue">future of AI and automation</span>, and whether work itself will become optional.</p><p>The episode also tackles <span class="hl-green">immigration and voter policies</span>, the state of the national debt, and Musk\'s controversial takes on everything from <span class="hl">simulation theory</span> to the mysterious circumstances surrounding Jeffrey Epstein. Throughout, Musk oscillates between <em>visionary optimism</em> about humanity\'s multi-planetary future and <span class="hl-purple">sharp criticism</span> of institutional failures and political dysfunction.</p>`,
      takeaways: [
        {icon:'\u{1F680}',color:'accent',title:'Starship Reached Orbit',text:'SpaceX achieved a <em>full orbital flight</em> with Starship, landing in the ocean after circling the globe â€” a massive engineering milestone.'},
        {icon:'\u{1F916}',color:'blue',title:'AI Will Transform Everything',text:'Musk believes AI and robotics will fundamentally <em>change employment patterns</em>, potentially making traditional work optional within a generation.'},
        {icon:'\u{1F4B8}',color:'green',title:'Government Fraud Is Staggering',text:'From zombie Social Security payments to $24 billion spent ineffectively on homelessness â€” <em>institutional waste is systemic</em>.'},
        {icon:'\u{1F5FD}',color:'purple',title:'Free Speech Is Under Threat',text:'Musk frames his Twitter acquisition as a <em>fight against ideological capture</em> of public discourse.'},
        {icon:'\u{1F697}',color:'rose',title:'The Tesla Roadster Might Fly',text:'Musk hints the second-gen Roadster could have <em>actual flight capability</em> â€” not just a sports car, but a flying one.'}
      ],
      topics: ['SpaceX','Starship','Tesla','Cybertruck','Roadster','Twitter/X','Free Speech','Government Waste','AI','xAI','Automation','Encryption','Immigration','National Debt','Simulation Theory','Neuralink','Homelessness','Politics'],
      chapters: [
        {time:'0:00',name:'Introduction'},
        {time:'4:31',name:'Sam Altman & OpenAI whistleblower'},
        {time:'10:42',name:'Epstein, simulation theory & comet'},
        {time:'15:32',name:'SpaceX Starship launch'},
        {time:'28:00',name:'Mars colonization'},
        {time:'38:37',name:'Tesla Cybertruck & Roadster'},
        {time:'43:41',name:'Twitter/X acquisition & free speech'},
        {time:'49:00',name:'California & homelessness crisis'},
        {time:'1:02:56',name:'Encrypted messaging & AI'},
        {time:'1:20:00',name:'AI & the future of work'},
        {time:'1:40:00',name:'Government fraud & Social Security'},
        {time:'2:00:00',name:'Immigration & voter policies'},
        {time:'2:20:00',name:'National debt & economics'},
        {time:'2:40:00',name:'xAI, Grok & AI music'},
        {time:'3:00:00',name:'Neuralink & brain-computer interfaces'},
        {time:'3:15:00',name:'The future of humanity'}
      ],
      insights: [
        {label:'\u{1F680} Milestone',color:'accent',title:'Starship completed a full orbital flight',text:'The most powerful rocket ever built <em>circled the entire globe</em> and landed in the ocean. Musk describes the engineering challenge as unprecedented.',timestamp:'15:32'},
        {label:'\u{1F916} Prediction',color:'blue',title:'AI will make traditional work optional',text:'Musk envisions a near future where AI and robotics handle most labor, creating <em>universal high income</em> without traditional employment.',timestamp:'1:20:00'},
        {label:'\u{1F4B8} Expos\u00E9',color:'green',title:'Zombie payments and phantom citizens',text:'Social Security databases contain impossible birthdates and payments to people who should be long dead â€” <em>billions in systemic fraud</em>.',timestamp:'1:40:00'},
        {label:'\u{1F5E3}\u{FE0F} Philosophy',color:'purple',title:'Twitter was bought to fight a "mind virus"',text:'Musk describes his $44B acquisition as a <em>defensive move against ideological capture</em> of the public square.',timestamp:'43:41'},
        {label:'\u{1F3CE}\u{FE0F} Product',color:'rose',title:'The new Roadster might actually fly',text:'Musk coyly suggests the second-gen Tesla Roadster will have <em>rocket thrusters for actual flight capability</em>.',timestamp:'38:37'},
        {label:'\u{1F512} Technical',color:'yellow',title:'No messaging app is truly secure',text:'Musk argues that <em>true encryption doesn\'t exist</em> in practice â€” eventually AI will replace messaging apps entirely.',timestamp:'1:02:56'},
        {label:'\u{1F30D} Vision',color:'blue',title:'Mars is the backup drive for civilization',text:'Musk reiterates his core thesis: humanity needs to become <em>multi-planetary</em> as insurance against extinction.',timestamp:'28:00'},
        {label:'\u{1F9E0} Update',color:'accent',title:'Neuralink is reading minds',text:'Brain-computer interface updates â€” patients are <em>controlling computers with thought</em>, with more ambitious goals ahead.',timestamp:'3:00:00'}
      ],
      quotes: [
        {text:'Starship circled the entire planet and landed itself. Think about that. The most powerful rocket in history, and it parks itself.',speaker:'Elon Musk'},
        {text:'I bought Twitter because there was a nihilistic, anti-civilizational mind virus spreading through social media. Someone had to do something.',speaker:'Elon Musk'},
        {text:'The Social Security database has people listed with birthdates in the 1700s who are still receiving checks. The fraud is unbelievable.',speaker:'Elon Musk'},
        {text:'AI is going to be so good that most jobs just won\'t need humans anymore. That\'s not dystopia â€” it\'s freedom, if we handle it right.',speaker:'Elon Musk'},
        {text:'California spent twenty-four billion dollars on homelessness and the problem got worse. At some point you have to ask where the money actually went.',speaker:'Elon Musk'},
        {text:'No app is truly end-to-end encrypted. If a sufficiently motivated actor wants your messages, they\'ll get them.',speaker:'Elon Musk'},
        {text:'The Roadster is going to be unlike anything anyone has ever seen. Let\'s just say it won\'t always have its wheels on the ground.',speaker:'Elon Musk'},
        {text:'Mars is the backup drive for civilization. If something happens to Earth and we\'re not on Mars, that\'s it. Game over.',speaker:'Elon Musk'},
        {text:'We are most likely living in a simulation. The odds that this is base reality are billions to one against.',speaker:'Elon Musk'},
        {text:'Neuralink is already letting people control computers with their thoughts. In ten years, this will seem as normal as a smartphone.',speaker:'Elon Musk'}
      ],
      clips: [
        {title:'Starship Circled the Planet',text:'The most powerful rocket in history completed a <em>full orbital flight</em> â€” Musk describes the engineering triumph.',timestamp:'15:32',tags:['\u{1F525} High Viral','SpaceX']},
        {title:'"I Bought Twitter to Fight a Mind Virus"',text:'Musk\'s provocative explanation for the <em>$44 billion acquisition</em> that stunned the world.',timestamp:'43:41',tags:['\u{1F525} High Viral','Twitter/X']},
        {title:'The Roadster Will Fly',text:'Musk hints at <em>rocket-powered flight capability</em> in the next Tesla Roadster. Not a metaphor.',timestamp:'38:37',tags:['\u{1F525} High Viral','Tesla']},
        {title:'Zombie Social Security Payments',text:'People born in the 1700s still receiving checks â€” <em>staggering government fraud</em> exposed.',timestamp:'1:40:00',tags:['\u{1F4A1} Insightful','Government']},
        {title:'AI Makes Work Optional',text:'Musk\'s vision of a future where <em>nobody needs to work</em> â€” and why that\'s liberating, not terrifying.',timestamp:'1:20:00',tags:['\u{1F4A1} Insightful','AI']},
        {title:'"Mars Is the Backup Drive"',text:'Humanity\'s survival depends on <em>becoming multi-planetary</em> â€” Musk\'s core life mission in one sentence.',timestamp:'28:00',tags:['\u{1F48E} Quotable','Space']}
      ],
      timeline: [
        {startTime:'0:00',endTime:'4:31',title:'Introduction',text:'Rogan welcomes Musk back for another <em>wide-ranging conversation</em>.',tags:['Setup']},
        {startTime:'4:31',endTime:'10:42',title:'OpenAI & Sam Altman',text:'Discussion about the Altman-Carlson interview and <em>controversies surrounding OpenAI</em> and the Suchir Balaji case.',tags:['OpenAI','Drama']},
        {startTime:'10:42',endTime:'15:32',title:'Simulation Theory & Big Questions',text:'Are we living in a simulation? <em>Epstein, Gates, and cosmic speculation</em> about comet 3I/ATLAS.',tags:['Philosophy','Simulation']},
        {startTime:'15:32',endTime:'28:00',title:'SpaceX & Starship',text:'The orbital flight achievement â€” <em>the most powerful rocket ever built</em> circling the globe and landing in the ocean.',tags:['SpaceX','Starship','Key Section']},
        {startTime:'28:00',endTime:'38:37',title:'Mars Colonization',text:'Why humanity must become <em>multi-planetary</em> and the timeline for Mars.',tags:['Mars','Vision']},
        {startTime:'38:37',endTime:'43:41',title:'Tesla: Cybertruck & Roadster',text:'Cybertruck updates and the bombshell hint about a <em>flying Roadster</em>.',tags:['Tesla','Products','Key Section']},
        {startTime:'43:41',endTime:'49:00',title:'Twitter/X & Free Speech',text:'Why Musk bought Twitter â€” fighting a <em>"nihilistic anti-civilizational mind virus"</em>.',tags:['Twitter/X','Free Speech','Key Section']},
        {startTime:'49:00',endTime:'1:02:56',title:'California & Homelessness',text:'$24 billion spent with <em>worsening outcomes</em> â€” Musk says it\'s really a drug crisis.',tags:['California','Policy']},
        {startTime:'1:02:56',endTime:'1:20:00',title:'Encrypted Messaging & AI',text:'Why <em>true encryption doesn\'t exist</em> and AI will replace messaging apps entirely.',tags:['Security','Technology']},
        {startTime:'1:20:00',endTime:'1:40:00',title:'AI & Future of Work',text:'Universal high income, optional employment, and <em>AI\'s transformative potential</em>.',tags:['AI','Economics','Key Section']},
        {startTime:'1:40:00',endTime:'2:00:00',title:'Government Fraud & Social Security',text:'Zombie payments, impossible birthdates, and <em>systemic institutional failure</em>.',tags:['Government','Fraud']},
        {startTime:'2:00:00',endTime:'2:20:00',title:'Immigration & Voter Policies',text:'Controversial takes on <em>strategic immigration and voter ID</em>.',tags:['Immigration','Politics']},
        {startTime:'2:20:00',endTime:'2:40:00',title:'National Debt & Economics',text:'The fiscal crisis and why <em>AI and robotics may be the only solution</em>.',tags:['Economics','Debt']},
        {startTime:'2:40:00',endTime:'3:00:00',title:'xAI, Grok & AI Music',text:'Updates on xAI\'s progress, <em>Grok\'s capabilities</em>, and AI-generated music.',tags:['xAI','Grok']},
        {startTime:'3:00:00',endTime:'3:15:00',title:'Neuralink',text:'Patients controlling computers with thought â€” <em>brain-computer interface progress</em>.',tags:['Neuralink','BCI']},
        {startTime:'3:15:00',endTime:'3:23:00',title:'The Future of Humanity',text:'Musk\'s optimistic vision for a <em>multi-planetary, AI-enhanced civilization</em>.',tags:['Future','Closing']}
      ]
    }
  }
};

// ============================================================
// PROCESS ENTRY POINT
// ============================================================
function process() {
  const input = document.getElementById('podInput').value.trim();
  if (!input) return showToast('Paste a podcast link to get started');
  processPodcast(input);
}

function showToast(msg) {
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.classList.add('show');
  setTimeout(() => el.classList.remove('show'), 2400);
}

async function loadDemo(key) {
  const demo = DEMOS[key];
  if (!demo) return;
  resetUI();
  const loading = document.getElementById('loading');
  loading.classList.add('active');

  // Animate loading steps quickly for demo
  const steps = ['resolve', 'analyze', 'insights', 'build'];
  for (let i = 0; i < steps.length; i++) {
    setStep(steps[i], 'active');
    await new Promise(r => setTimeout(r, 200));
    setStep(steps[i], 'done');
  }

  currentData = demo.data;
  renderData(demo.data);

  await new Promise(r => setTimeout(r, 300));
  loading.classList.remove('active');
  document.getElementById('heroSection').classList.add('collapsed');
  document.getElementById('podView').classList.add('active');
  document.querySelectorAll('.load-step').forEach(s => s.classList.remove('vis','done'));

  // Try to resolve audio for playback (non-blocking)
  try {
    const rRes = await fetch('/api/resolve', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ url: demo.spotifyUrl })
    });
    const rData = await rRes.json();
    if (rRes.ok && rData.mp3Url) {
      loadAudio(rData.mp3Url, rData.artwork, demo.data.metadata?.show, demo.data.metadata?.title);
    }
  } catch (e) {
    console.log('Could not resolve demo audio:', e.message);
  }
}

function resetUI() {
  document.getElementById('heroSection').classList.remove('collapsed');
  document.getElementById('podView').classList.remove('active');
  const audio = document.getElementById('podAudio');
  if (audio) audio.pause();
  document.getElementById('playerWrap').style.display = 'none';
}

function resetApp() {
  document.getElementById('heroSection').classList.remove('collapsed');
  document.getElementById('podView').classList.remove('active');
  document.getElementById('podInput').value = '';
  const audio = document.getElementById('podAudio');
  if (audio) audio.pause();
  document.getElementById('playerWrap').style.display = 'none';
  currentData = null; currentMp3Url = null;
  // Reset tabs
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.querySelector('.tab').classList.add('active');
  document.getElementById('p-overview').classList.add('active');
  // Reset chat
  document.getElementById('msgs').innerHTML = '<div class="msg"><div class="msg-av ai">PC</div><div class="msg-bubble"><strong>Hey! I\'ve analyzed this entire podcast.</strong> Ask me anything â€” I can find specific moments, explain arguments, compare viewpoints, or help you create content.</div></div>';
}

// ============================================================
// UI INTERACTIONS
// ============================================================
function switchTab(name) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  const panel = document.getElementById('p-' + name);
  if (panel) panel.classList.add('active');
  document.querySelectorAll('.tab').forEach(t => {
    const txt = t.textContent.toLowerCase();
    if (txt.includes(name) || (name === 'ask' && txt.includes('ask'))) t.classList.add('active');
  });
}

function toggleTheme() {
  const html = document.documentElement;
  const btn = document.getElementById('themeBtn');
  if (html.dataset.theme === 'dark') { html.dataset.theme = 'light'; btn.innerHTML = '&#9728;&#65039;'; }
  else { html.dataset.theme = 'dark'; btn.innerHTML = '&#127769;'; }
}

function toggleGuestInfo() { document.getElementById('guestInfo').classList.toggle('active'); }
document.addEventListener('click', e => {
  const gi = document.getElementById('guestInfo');
  if (gi && !gi.contains(e.target)) gi.classList.remove('active');
});

// Chat
function sendMsg() {
  const inp = document.getElementById('chatIn');
  const text = inp.value.trim();
  if (!text) return;
  const msgs = document.getElementById('msgs');
  msgs.innerHTML += `<div class="msg"><div class="msg-av user">B</div><div class="msg-bubble">${escHtml(text)}</div></div>`;
  inp.value = '';
  setTimeout(() => {
    const resp = generateChatResponse(text);
    msgs.innerHTML += `<div class="msg"><div class="msg-av ai">PC</div><div class="msg-bubble">${resp}</div></div>`;
    msgs.scrollTop = msgs.scrollHeight;
  }, 700);
  msgs.scrollTop = msgs.scrollHeight;
}

function escHtml(s) { return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

function generateChatResponse(text) {
  const lower = text.toLowerCase();
  if (!currentData) return '<strong>No podcast loaded yet.</strong> Go back and load one first!';
  const d = currentData;
  if (lower.includes('summary') || lower.includes('summarize') || lower.includes('bullet')) {
    const tks = (d.takeaways || []).slice(0,3);
    return `<strong>Here's a quick summary:</strong><br><br>` + tks.map(t => `<strong>${t.icon} ${t.title}:</strong> ${t.text}`).join('<br><br>');
  }
  if (lower.includes('quote') || lower.includes('memorable')) {
    const qs = (d.quotes || []).slice(0,3);
    return `<strong>Some memorable quotes:</strong><br><br>` + qs.map(q => `&ldquo;${q.text}&rdquo; â€” <em>${q.speaker}</em>`).join('<br><br>');
  }
  if (lower.includes('tweet') || lower.includes('thread') || lower.includes('twitter')) {
    const ins = (d.insights || []).slice(0,5);
    return `<strong>Draft tweet thread:</strong><br><br>` + ins.map((i,n) => `<strong>${n+1}/</strong> ${i.title}: ${i.text.replace(/<[^>]+>/g,'')}`).join('<br><br>');
  }
  if (lower.includes('viral') || lower.includes('clip') || lower.includes('share')) {
    const cls = (d.clips || []).slice(0,3);
    return `<strong>Top viral moments:</strong><br><br>` + cls.map(c => `<strong>${c.title}</strong> <span class="ref">&#9201; ${c.timestamp}</span> â€” ${c.text.replace(/<[^>]+>/g,'')}`).join('<br><br>');
  }
  const first = (d.insights || [])[0];
  if (first) return `<strong>Based on the podcast:</strong> ${first.text}<br><br>The episode covers topics like ${(d.topics||[]).slice(0,5).join(', ')}. Ask me about any specific topic or moment!`;
  return `<strong>Interesting question!</strong> Based on my analysis, this podcast covers: ${(d.topics||[]).join(', ')}. Can you be more specific about what you'd like to explore?`;
}

function askSug(btn) { document.getElementById('chatIn').value = btn.textContent; sendMsg(); btn.style.display = 'none'; }
function copyQ(btn) {
  const card = btn.closest('.q');
  const text = card.querySelector('.q-text').textContent;
  const who = card.querySelector('.q-who').textContent;
  navigator.clipboard.writeText(`"${text}" â€” ${who}`);
  showToast('Quote copied!');
}
function openModal() { document.getElementById('shareModal').classList.add('active'); }
function closeModal() { document.getElementById('shareModal').classList.remove('active'); }
function shareAction(t) { closeModal(); showToast({twitter:'Opening Twitter/X...',linkedin:'Opening LinkedIn...',copy:'Link copied!',embed:'Embed code copied!'}[t]); }
document.addEventListener('keydown', e => { if (e.key === 'Escape') { closeModal(); closeLoading(); } });
</script>
</body>
</html>
